<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>실시간 좌표 표시</title>
  <style>
    body { font-family: Arial; text-align: center; margin-top: 30px; }
    #coords { font-size: 1.5em; margin-bottom: 20px; }

    /* 그리드 스타일 */
    #grid {
      display: grid;
      grid-template-columns: repeat(19, 30px);
      grid-template-rows: repeat(19, 30px);
      gap: 2px;
      justify-content: center;
    }

    .cell {
      width: 30px;
      height: 30px;
      background-color: #eee;
      border: 1px solid #ccc;
      font-size: 0.8em;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .active {
      background-color: #ff5722;
      color: white;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>실시간 좌표 수신</h1>
  <div id="coords">x: -, y: -</div>
  <div id="grid"></div>

  <script>
    const grid = document.getElementById("grid");

    // 19x19 셀 생성
    for (let y = 0; y < 19; y++) {
      for (let x = 0; x < 19; x++) {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.dataset.x = x;
        cell.dataset.y = y;
        grid.appendChild(cell);
      }
    }

    // WebSocket 연결
    const ws = new WebSocket("ws://localhost:6789");

    ws.onmessage = function(event) {
      const data = JSON.parse(event.data);
      const x = data.x;
      const y = data.y;

      // 좌표 텍스트 업데이트
      document.getElementById("coords").textContent = `x: ${x}, y: ${y}`;

      // 모든 셀 초기화
      document.querySelectorAll(".cell").forEach(cell => {
        cell.classList.remove("active");
        cell.textContent = "";
      });

      // 해당 좌표 셀 강조
      const target = document.querySelector(`.cell[data-x='${x}'][data-y='${y}']`);
      if (target) {
        target.classList.add("active");
        target.textContent = "●";
      }
    };

    ws.onerror = function() {
      document.getElementById("coords").textContent = "연결 오류!";
    };
  </script>
</body>
</html>